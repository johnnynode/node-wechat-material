### 域名和服务器的购买和配置

- 域名或ip是作为接收数据的地址，最好用域名(后期更多功能必须用域名)
- 自行搭建服务器或购买云产品
- 此处不再赘述

### 微信和我们自己服务器的交互

- 微信和微信服务器交互
- 微信服务器和域名服务器交互
- 域名服务器再和我们自己的应用服务器进行交互
- 所以，这个过程可以简化理解为：
    * 微信服务器和我们自己服务器进行交互, 然后微信服务器再和微信客户端进行交互
    * 抽象来说，微信和我们的服务器进行间接交互

### 微信和代理环境的交互

- 代理环境为：ngrok
- 这里我们将微信客户端和微信服务器统称为微信应用，这里忽略它们之间的交互
- 微信应用与ngrok域名进行交互
- ngrok域名服务器通过ngrok工具通道连接，我们本地的主机最终与微信应用进行交互

### 代理环境的搭建

1 ）ngrok和tunel

- 首先我们启动一个服务：$python m SimpleHTTPsERVER 3100$ 任意一个可指定端口的http服务均可
    * 这时候就可以把端口号映射到外网
- 开启ngrok工具：$./ngrok -config ngrok.cfg - subdomain xx-wechat 3000$
    * 注意，这里xx-wechat是子域名，个性域名，避免与他人重复
    * 3000是端口号，避免设置的过大
- 开启之后可以看到 http和https的代理已经开启
    * http://immoc-wechat.tunel.mobi -> 127.0.0.1:3100
    * https://immoc-wechat.tunel.mobi -> 127.0.0.1:3100
    * 在浏览器中访问，可看到本地文件信息
- 用起来并不太稳定

2 ) localtunnel服务

- 这是一个nodejs模块，需要npm安装一下 $npm i -g localtunnel$
- $lt --port 3100$ 就能实现一个端口映射
- 有一个不方便的地方是二级域名会发生变化

### 参考

- www.tunnel.mobi 貌似已挂了
- PageKit
- 花生壳
- 其他内网穿透工具：内网端口暴露到公网的服务