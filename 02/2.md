### 开发

1 ) **配置获取全局access_token的方法**

- 将app.js与中间件功能抽离出去编写成wx/g.js
- 注意：access_token是微信调用权限的钥匙
    * 每2小时(7200s)失效，需要自动获取
    * 只要更新之后，之前的那个就不能用了
    * 让系统每隔2个小时启动刷新票据，保持token的最新
    * 将票据存储在唯一的地方：数据库或唯一(必须保证各个服务器能访问到，不能存入内存)
- 配置公众号后台域名，开启本地代理，填入相关appId, secrect, token等信息，运行程序，即可成功获取access_token
- 具体参考：02/code1 代码

2 ) **编写关注后自动回复功能**

- 事件推送或消息推送，微信服务器推送给我们的都是post方式，而且数据格式为xml, 一些通用的流程如下：
- 第一：处理POST类型的控制逻辑，接收这个xml的数据包
- 第二：解析这个数据包，获得数据包的消息类型或事件类型，以及主体内容
- 第三：拼装我们定义好的消息
- 第四：包装成xml的格式，在5s内返回
- 当用户点击关注之后, 微信就会向我们post推送xml的数据
- 具体参考：02/code2 代码